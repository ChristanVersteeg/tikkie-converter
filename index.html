<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tikkie Link Converter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font for a clean look */
        body {
            font-family: "Inter", sans-serif;
            background-color: #f3f4f6; /* Light gray background */
        }
        /* Style for the container to center content */
        .container {
            max-width: 600px;
            margin: 2rem auto;
            padding: 1.5rem;
            background-color: #ffffff;
            border-radius: 1rem; /* Rounded corners */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        /* Textarea styling */
        textarea {
            resize: vertical; /* Allow vertical resizing */
            min-height: 100px; /* Minimum height */
        }
        /* Button styling */
        button {
            transition: background-color 0.2s ease-in-out;
        }
        button:hover {
            background-color: #1d4ed8; /* Darker blue on hover */
        }
        /* Message box styling */
        .message-box {
            background-color: #e0f2fe; /* Light blue background */
            color: #0c4a6e; /* Dark blue text */
            border-left: 4px solid #38bdf8; /* Blue border */
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="container w-full">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">Tikkie Link Converter</h1>

        <div class="mb-6">
            <label for="inputText" class="block text-gray-700 text-sm font-medium mb-2">
                Paste your Tikkie message here:
            </label>
            <textarea
                id="inputText"
                class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800"
                placeholder="e.g., Please could you pay me â‚¬ 20.00 for 'Jaimie' at https://tikkie.me/pay/lsl0ma0c11ht4iu3mvi8 This link is valid until 14 June"
            ></textarea>
        </div>

        <button
            id="convertButton"
            class="w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold text-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
        >
            Convert Tikkie Message
        </button>

        <div class="mt-8">
            <label for="outputText" class="block text-gray-700 text-sm font-medium mb-2">
                Converted Message:
            </label>
            <textarea
                id="outputText"
                class="w-full p-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-700 cursor-not-allowed"
                readonly
                placeholder="Your converted message will appear here."
            ></textarea>
        </div>

        <button
            id="copyButton"
            class="w-full bg-green-600 text-white py-3 px-4 rounded-lg font-semibold text-lg mt-4 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"
        >
            Copy to Clipboard
        </button>

        <div id="messageBox" class="message-box p-3 rounded-lg mt-6 hidden">
            </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const inputText = document.getElementById('inputText');
            const outputText = document.getElementById('outputText');
            const convertButton = document.getElementById('convertButton');
            const copyButton = document.getElementById('copyButton');
            const messageBox = document.getElementById('messageBox');

            // Function to show a message in the message box
            function showMessage(message, type = 'info') {
                messageBox.textContent = message;
                messageBox.classList.remove('hidden');
                // You can add different classes based on type (e.g., 'error', 'success')
                if (type === 'error') {
                    messageBox.classList.add('bg-red-100', 'text-red-800', 'border-red-400');
                    messageBox.classList.remove('bg-blue-100', 'text-blue-800', 'border-blue-400');
                } else {
                    messageBox.classList.add('bg-blue-100', 'text-blue-800', 'border-blue-400');
                    messageBox.classList.remove('bg-red-100', 'text-red-800', 'border-red-400');
                }
                setTimeout(() => {
                    messageBox.classList.add('hidden');
                }, 3000); // Hide after 3 seconds
            }

            convertButton.addEventListener('click', () => {
                const input = inputText.value;
                // Regular expression to find a Tikkie link
                const tikkieLinkRegex = /(https:\/\/tikkie\.me\/pay\/[a-zA-Z0-9]+)/;
                const match = input.match(tikkieLinkRegex);

                if (match && match[1]) {
                    const tikkieLink = match[1];
                    // Construct the new phrase with the extracted link
                    const newPhrase = `Hoi, hierbij de tikkie van de les van vandaag: ${tikkieLink}`;
                    outputText.value = newPhrase;
                    showMessage('Message converted successfully!');
                } else {
                    outputText.value = ''; // Clear output if no link found
                    showMessage('No Tikkie link found in the input message. Please check the format.', 'error');
                }
            });

            copyButton.addEventListener('click', () => {
                if (outputText.value) {
                    // Use document.execCommand('copy') for clipboard functionality
                    // as navigator.clipboard.writeText() might not work in some iframe environments.
                    outputText.select();
                    outputText.setSelectionRange(0, 99999); // For mobile devices
                    try {
                        document.execCommand('copy');
                        showMessage('Copied to clipboard!');
                    } catch (err) {
                        showMessage('Failed to copy text. Please copy manually.', 'error');
                        console.error('Failed to copy text: ', err);
                    }
                } else {
                    showMessage('Nothing to copy. Please convert a message first.', 'error');
                }
            });
        });
    </script>
</body>
</html>
